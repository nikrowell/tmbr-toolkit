# utils

A collection of convenient JavaScript utilities.

```bash
npm install @tmbr/utils
```

## Upgrading

Breaking changes introduced in version `2.0.0`:

*   `request` headers param is now [fetch options](https://developer.mozilla.org/en-US/docs/Web/API/fetch#options) (allows cancellation via [AbortController](https://developer.mozilla.org/en-US/docs/Web/API/AbortController))
*   `io` function signature change
*   `parse` is now `toJSON`
*   `setProperty` is now `prop` and no longer falls back to the root html element if value is ommitted
*   `createWorker` is now `worker`

## Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [attr](#attr)
*   [average](#average)
*   [bind](#bind)
*   [brightness](#brightness)
*   [clamp](#clamp)
*   [combine](#combine)
*   [cookie](#cookie)
*   [coords](#coords)
*   [cx](#cx)
*   [debounce](#debounce)
*   [distance](#distance)
*   [dot](#dot)
*   [empty](#empty)
*   [fill](#fill)
*   [findAll](#findall)
*   [findOne](#findone)
*   [focusables](#focusables)
*   [format](#format)
*   [html](#html)
*   [indexOf](#indexof)
*   [io](#io)
*   [isArray](#isarray)
*   [isBoolean](#isboolean)
*   [isClass](#isclass)
*   [isDefined](#isdefined)
*   [isElement](#iselement)
*   [isEmpty](#isempty)
*   [isFunction](#isfunction)
*   [isNumber](#isnumber)
*   [isNumeric](#isnumeric)
*   [isObject](#isobject)
*   [isString](#isstring)
*   [isUndefined](#isundefined)
*   [lerp](#lerp)
*   [luminance](#luminance)
*   [map](#map)
*   [noop](#noop)
*   [normalize](#normalize)
*   [observable](#observable)
*   [on](#on)
*   [once](#once)
*   [ordinal](#ordinal)
*   [PI](#pi)
*   [pipe](#pipe)
*   [pledge](#pledge)
*   [prop](#prop)
*   [random](#random)
*   [rect](#rect)
*   [request](#request)
*   [ro](#ro)
*   [round](#round)
*   [safe](#safe)
*   [settled](#settled)
*   [shuffle](#shuffle)
*   [slug](#slug)
*   [svg](#svg)
*   [throttle](#throttle)
*   [toArray](#toarray)
*   [toBoolean](#toboolean)
*   [toJSON](#tojson)
*   [toDegrees](#todegrees)
*   [toRadians](#toradians)
*   [toRGB](#torgb)
*   [trap](#trap)
*   [traverse](#traverse)
*   [uid](#uid)
*   [validate](#validate)
*   [wait](#wait)
*   [worker](#worker)
*   [wrap](#wrap)

### attr

Gets, sets or removes an attribute from an element

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** element
*   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** attribute name
*   `value` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean))** attribute value (falsy to remove)

Returns **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** attribute value when getting

### average

Calculates the average from an array of numbers

#### Parameters

*   `values` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>** array of numbers

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** average value

### bind

Binds methods to an instance, including class getters and setters (based on [auto-bind](https://www.npmjs.com/package/auto-bind))

#### Parameters

*   `self` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** target instance
*   `methods` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)** specific method name(s) to bind, or omit for all

#### Examples

```javascript
class Example {
  constructor() { bind(this); }
}
```

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** self for chaining

### brightness

Calculates perceived brightness from an RGB array

#### Parameters

*   `rgb` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>** \[r, g, b] values (0-255)

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** brightness value (0-255)

### clamp

Clamps a value between two bounds

#### Parameters

*   `value` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** value to clamp
*   `min` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** minimum boundary (default: 0) (optional, default `0`)
*   `max` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** maximum boundary (default: 1) (optional, default `1`)

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** clamped value

### combine

Combines multiple functions into a single callback that calls all of them

#### Parameters

*   `fns` **...[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** functions to combine

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** combined function

### cookie

Gets, sets, or deletes a cookie

#### Parameters

*   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** cookie name
*   `value` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | null)** value to set, or null to delete
*   `options` **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | [Date](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date) | [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** expiration days, Date, or cookie attributes

#### Examples

```javascript
cookie('name', 'value');      // set
cookie('name');               // get
cookie('name', null);         // delete
cookie('name', 'value', 30);  // expires in 30 days
```

Returns **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** cookie value when getting

### coords

Gets x and y coordinates from a pointer event, optionally relative to a target element

#### Parameters

*   `event` **[Event](https://developer.mozilla.org/docs/Web/API/Event)** mouse or touch event
*   `target` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** optional element for relative coordinates

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with x, y (and px, py percentages if target provided)

### cx

Conditionally toggles classes on an element or generates a string of classes,
similar to [classnames](https://www.npmjs.com/package/classnames)

#### Parameters

*   `args` **...([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array))** class names, objects, or arrays
*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** optional element to modify

#### Examples

```javascript
cx('a', {'b': false, 'c': true}, [null && 'd', 'e']); // 'a c e'
cx(el, 'active', {'visible': isVisible});
```

Returns **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | DOMTokenList)** class string, or classList if element passed with no args

### debounce

Creates a debounced function that delays invocation until after wait ms have elapsed
since the last call

#### Parameters

*   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function to debounce
*   `wait` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** delay in milliseconds

#### Examples

```javascript
const debouncedFn = debounce(onInput, 300);
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** debounced function

### distance

Calculates the distance between two points

#### Parameters

*   `x1` **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** x coordinate or object with x and y properties
*   `y1` **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** y coordinate or object with x and y properties
*   `x2` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** x coordinate of the second point (when using coordinates)
*   `y2` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** y coordinate of the second point (when using coordinates)

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** distance

### dot

Gets or sets a value at a dot-notated path within a nested object

#### Parameters

*   `object` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** target object
*   `path` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** dot-notated path (e.g., 'a.b.c')
*   `value` **any** value to set (omit to get)

#### Examples

```javascript
dot(obj, 'user.name');        // get
dot(obj, 'user.name', 'Nik'); // set
```

Returns **any** nested value when getting, or object when setting

### empty

Removes all children from an element (can be significantly faster than `innerHTML`)

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** element to empty

#### Examples

```javascript
const div = document.querySelector('.example');
empty(div).append(fragment);
```

Returns **[Element](https://developer.mozilla.org/docs/Web/API/Element)** the emptied element for chaining

### fill

Creates an array of specified length filled with values

#### Parameters

*   `n` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** array length
*   `value` **(any | [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function))** fill value, or function receiving index

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** filled array

### findAll

querySelectorAll wrapper with optional parent context

#### Parameters

*   `selector` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** CSS selector
*   `parent` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** parent element (default: document)

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Element](https://developer.mozilla.org/docs/Web/API/Element)>** array of matching elements

### findOne

querySelector wrapper with optional parent context

#### Parameters

*   `selector` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** CSS selector
*   `parent` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** parent element (default: document)

Returns **([Element](https://developer.mozilla.org/docs/Web/API/Element) | null)** matching element or null

### focusables

Array of CSS selectors for focusable elements based on [focusable-selectors](https://github.com/KittyGiraudel/focusable-selectors)

Type: [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>

### format

Formats a date according to a pattern string

#### Parameters

*   `pattern` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** format pattern (YYYY, MM, DD, HH, mm, ss, etc.)
*   `date` **([Date](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date) | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number))** date to format (default: now)

#### Examples

```javascript
format('MMMM Do, YYYY');        // 'January 1st, 2024'
format('YYYY-MM-DD', someDate); // '2024-01-01'
```

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** formatted date string

### html

Creates DOM elements using template literals, inspired by [facon](https://www.npmjs.com/package/facon)

#### Parameters

*   `strings` **TemplateStringsArray** template literal strings
*   `vars` **...any** template literal values (strings, elements, or arrays)

#### Examples

```javascript
const img = html`<img src="/image.jpg" alt="">`;
const list = html`<ul>${items.map(i => html`<li>${i}</li>`)}</ul>`;
```

Returns **([Element](https://developer.mozilla.org/docs/Web/API/Element) | [DocumentFragment](https://developer.mozilla.org/docs/Web/API/DocumentFragment))** single element or fragment if multiple root nodes

### indexOf

Gets the index of an element among its siblings

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** element to find index of

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** index within parent's children

### io

Tracks enter and leave events on an element using IntersectionObserver

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** element to observe
*   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** enter/leave callbacks, once boolean, and IntersectionObserver options

    *   `options.enter` &#x20;
    *   `options.leave` &#x20;
    *   `options.once`   (optional, default `false`)
    *   `options.rest` **...any**&#x20;

#### Examples

```javascript
const unobserve = io(el, {
  enter: () => console.log('enter'),
  leave: () => console.log('leave'),
});
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** cleanup function to stop observing

### isArray

Checks if a value is an array using [Array.isArray](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray))

#### Parameters

*   `value` &#x20;

### isBoolean

Checks if a value is either `true` or `false`

#### Parameters

*   `value` &#x20;

### isClass

Checks if a function is a class constructor

#### Parameters

*   `fn` &#x20;

### isDefined

Checks if a value is defined (opposite of [isUndefined](#isUndefined))

#### Parameters

*   `value` &#x20;

### isElement

Checks if a value is a DOM element, or if an element is a specific tag

#### Parameters

*   `value` &#x20;
*   `tag` &#x20;

### isEmpty

Checks if a value is:

*   `undefined`, `null`, `false` or `0`
*   an array or string with a length of 0
*   an object without keys

#### Parameters

*   `value` &#x20;

### isFunction

Checks if a value is a function

#### Parameters

*   `value` &#x20;

### isNumber

Checks if a value is a number

#### Parameters

*   `value` &#x20;

### isNumeric

Checks if a value is a numeric

#### Parameters

*   `value` &#x20;

### isObject

Checks if a value is an object (and not an array or [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#typeof_null))

#### Parameters

*   `value` &#x20;

### isString

Checks if a value is a string

#### Parameters

*   `value` &#x20;

### isUndefined

Checks if a value is undefined (opposite of [isDefined](#isDefined))

#### Parameters

*   `value` &#x20;

### lerp

Performs linear interpolation between two values

#### Parameters

*   `a` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** current value
*   `b` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** target value
*   `n` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** progress (0-1)

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** interpolated value

### luminance

Calculates relative luminance from an RGB array

#### Parameters

*   `rgb` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>** \[r, g, b] values (0-255)

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** luminance value (0-255)

### map

Maps a value from one range to another

#### Parameters

*   `value` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** original value
*   `inMin` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** lower bound of the current range
*   `inMax` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** upper bound of the current range
*   `outMin` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** lower bound of the target range
*   `outMax` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** upper bound of the target range

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** new value mapped to the target range

### noop

No operation

### normalize

Normalizes a value between two bounds

#### Parameters

*   `value` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** value to normalize
*   `min` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** minimum boundary
*   `max` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** maximum boundary

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** normalized value (0-1)

### observable

Creates a reactive proxy with subscribe method for state changes

#### Parameters

*   `initial` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** initial state object
*   `callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** optional subscriber called on changes

#### Examples

```javascript
const store = observable({count: 0});
const unsubscribe = store.subscribe((newState, oldState, key) => {
  console.log(`${key} changed from ${oldState.count} to ${newState.count}`);
});
store.count = 10;
unsubscribe();
```

Returns **[Proxy](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Proxy)** proxied object with subscribe method

### on

Adds event listeners with optional delegation support

#### Parameters

*   `events` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)** event name(s), space-separated or array
*   `target` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Element](https://developer.mozilla.org/docs/Web/API/Element) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Element](https://developer.mozilla.org/docs/Web/API/Element)>)** CSS selector (delegation) or element(s)
*   `callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** event handler
*   `scope` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** delegation scope (default: document) (optional, default `document`)

#### Examples

```javascript
const off = on('click', '.button', handleClick);
const off = on('mouseenter mouseleave', el, handleHover);
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** cleanup function to remove listeners

### once

Creates an event listener using [on](#on) that fires only once

#### Parameters

*   `type` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)** event name(s)
*   `target` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Element](https://developer.mozilla.org/docs/Web/API/Element) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Element](https://developer.mozilla.org/docs/Web/API/Element)>)** CSS selector or element(s)
*   `callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** event handler
*   `scope` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** delegation scope (default: document)

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** cleanup function to remove listener

### ordinal

Appends ordinal suffix (st, nd, rd, th) to a number

#### Parameters

*   `n` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** input number

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** number with ordinal suffix (e.g., '1st', '2nd', '3rd')

### PI

Math constants PI, TWO\_PI, and HALF\_PI using [Math.PI](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/PI) (3.141592653589793)

Type: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)

### pipe

Creates a function that pipes input through multiple functions

#### Parameters

*   `fns` **...[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** functions to chain

#### Examples

```javascript
pipe(trim, lowercase, slugify)('  Hello World  '); // 'hello-world'
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** composed function

### pledge

Creates a deferred promise with external resolve/reject
(consider using [Promise.withResolvers()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/withResolvers) instead)

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with promise, resolve, and reject properties

### prop

Gets or sets a CSS custom property on an element

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** element
*   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** property name (e.g., '--color')
*   `value` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** value to set (omit to get)

Returns **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** property value when getting

### random

Multi-purpose random function:

*   no arguments: returns random float 0-1
*   array: returns random element from the array
*   min: returns random float in range 0-min
*   min and max: returns random float in range min-max

#### Parameters

*   `min` **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array))** upper bound, or array to pick from
*   `max` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** upper bound when min is provided

Returns **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | any)** random number or random array element

### rect

Gets the size and position of an element relative to the viewport using [getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** element to measure

Returns **DOMRect** bounding client rect

### request

Fetch wrapper with common defaults and convenience methods

*   defaults to sending `'Content-Type': 'application/json'` headers
*   defaults to resolving with the returned JSON response or rejecting with `errors` and `status`
*   prefixes relative URLs with a preceeding slash
*   converts the data argument to a JSON string or URL params for `GET` requests
*   exposes `request.headers` for overriding the default headers
*   exposes `request.handler` for overriding the default response handler passed to `fetch(...).then(request.handler)`
*   creates `request[method]()` helpers

#### Parameters

*   `method` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** HTTP method
*   `url` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** request URL
*   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** request data (body or query params for GET)
*   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** additional fetch options (optional, default `{}`)

#### Examples

```javascript
request.get('https://api.example.com/users?limit=10');
request.get('/users', {limit: 10}); *
request.post('/login', {username, password});
request.headers['Authorization'] = `Bearer ${token}`;
```

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** promise resolving to JSON response

### ro

Tracks resize events on an element using ResizeObserver

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** element to observe
*   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** callback receiving ResizeObserverEntry

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** cleanup function to stop observing

### round

Rounds a value to the specified number of decimal places

#### Parameters

*   `n` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** number to round
*   `precision` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** decimal places (default: 2) (optional, default `2`)

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** rounded value

### safe

Wraps an async function with error handling

#### Parameters

*   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** async function to wrap
*   `handler` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** error handler

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** wrapped function that catches errors

### settled

Awaits a promise and returns \[value, error] tuple for easier error handling

#### Parameters

*   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** promise to await
*   `handler` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** optional custom result handler

#### Examples

```javascript
const [data, err] = await settled(fetchUser(id));
if (err) handleError(err);
```

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)>** \[value, reason] tuple

### shuffle

Shuffles an array in place, or returns a random sort comparator

#### Parameters

*   `array` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array to shuffle (optional)

Returns **([Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array) | [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number))** shuffled array, or random comparator if no array provided

### slug

Converts a string to a URL-friendly slug

#### Parameters

*   `str` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** string to convert

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** lowercase, hyphenated slug

### svg

Creates SVG elements using template literals

#### Parameters

*   `strings` **TemplateStringsArray** template literal strings
*   `vars` **...any** template literal values

#### Examples

```javascript
const square = svg`
  <svg viewBox="0 0 100 100">
    <rect fill="#FF0000" width="100" height="100" />
  </svg>`;

const circle = svg`
  <svg viewBox="0 0 100 100">
    <circle fill="#FF0000" r="50" cx="50" cy="50" />
  </svg>`;
```

Returns **[SVGElement](https://developer.mozilla.org/docs/Web/SVG/Element/animate)** parsed SVG element

### throttle

Creates a throttled function that only invokes once per wait period

#### Parameters

*   `fn` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function to throttle
*   `wait` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** minimum time between calls in milliseconds

#### Examples

```javascript
const throttledFn = throttle(onScroll, 100);
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** throttled function

### toArray

Converts a value to an array

#### Parameters

*   `value` **any** value to convert (NodeList, HTMLCollection, or any value)

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array containing the value(s)

### toBoolean

Converts a value to boolean (handles string values like 'true', 'false', 'yes', 'no')

#### Parameters

*   `value` **any** value to convert

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** boolean value

### toJSON

Converts between JSON strings and objects

#### Parameters

*   `value` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) | [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** string to parse or object to stringify
*   `defaults` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** default values to merge (when parsing) or extend (when stringifying)

Returns **([Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object) | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String))** parsed object or JSON string

### toDegrees

Converts radians to degrees

#### Parameters

*   `radians` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** angle in radians

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** angle in degrees

### toRadians

Converts degrees to radians

#### Parameters

*   `degrees` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** angle in degrees

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** angle in radians

### toRGB

Converts a hex color string to an RGB array

#### Parameters

*   `hex` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** hex color (with or without #)

Returns **([Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)> | null)** \[r, g, b] array (0-255) or null if invalid

### trap

Traps focus within an element for keyboard navigation

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** container element
*   `callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** optional function to filter/modify focusable elements

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** cleanup function to restore previous focus

### traverse

Walks a DOM tree and calls callback for each node

#### Parameters

*   `el` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** root element to traverse
*   `callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function called for each node
*   `filter` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** NodeFilter constant (default: NodeFilter.SHOW\_ELEMENT)

### uid

Generates a unique base-16 string ID

#### Parameters

*   `prefix` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** optional prefix (optional, default `''`)
*   `suffix` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** optional suffix (optional, default `''`)

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** unique identifier

### validate

Validates data against a set of rules

#### Parameters

*   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** data to validate
*   `rules` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object of validator functions (return true or error string)

#### Examples

```javascript
const data = {
  email: 'hello@example.com',
  password: 'password',
  passwordConfirm: null
};

const rules = {
  email(value) {
    return /.+\@.+\..+/.test(value) || 'Invalid email';
  },
  password(value) {
    if (!value) return 'Required';
    return value.length >= 8 || 'Must be at least 8 characters';
  },
  passwordConfirm(value, data) {
    return value === data.password || 'Must match your password';
  },
};

const errors = validate(data, rules);
```

Returns **([Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object) | null)** errors object, or null if valid

### wait

Returns a promise that resolves after a delay

#### Parameters

*   `delay` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** time in milliseconds

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** promise that resolves after delay

### worker

Creates a Web Worker from a function or string

#### Parameters

*   `code` **([Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function) | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String))** worker code as function or string

Returns **[Worker](https://developer.mozilla.org/docs/Web/JavaScript)** Web Worker instance

### wrap

Wraps an index around the given length using the modulo operator

#### Parameters

*   `index` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** index to wrap
*   `n` **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array))** length or array

#### Examples

```javascript
wrap(1, 3);  // 1
wrap(3, 3);  // 0
wrap(-1, 3); // 2
```

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** wrapped index
